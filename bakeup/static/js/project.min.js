$(document).ready((function(){var e=[].slice.call(document.querySelectorAll(".toast")).map((function(e){return new bootstrap.Toast(e)}));console.log(e),e.forEach((e=>e.show())),location.hash&&$("button[data-bs-target='"+location.hash+"']").tab("show"),$(document.body).on("click","button[data-bs-toggle='tab']",(function(e){location.hash=this.getAttribute("data-bs-target")})),$(".customer-order-form").each((function(){console.log($(this)),$(this).dirty({preventLeaving:!0,leavingMessage:"Du hast deinen Brotkorb noch nicht abgeschickt. Willst du wirklich die Seite verlassen?"})}))})),$(window).on("popstate",(function(){var e=location.hash||$("button[data-bs-toggle='tab']").first().attr("data-bs-target");$("button[data-bs-target='"+e+"']").tab("show")}));var popoverTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')),popoverList=popoverTriggerList.map((function(e){return new bootstrap.Popover(e)})),form=document.querySelectorAll(".form-container"),container=document.querySelector(".form-add-inline"),addAnotherContainer=document.querySelector(".add-another-container"),addButton=document.querySelector(".add-another-form"),totalForms=document.querySelector("#id_form-TOTAL_FORMS"),saveButton=document.querySelector(".save-another-form");function addRemoveButtonEvent(e){for(let t=0;t<e.length;t++)e[t].addEventListener("click",removeForm)}function addForm(e){e.preventDefault(),saveButton.classList.remove("d-none");var t=parseInt(totalForms.value),o=form[0].cloneNode(!0);RegExp("form-(\\d){1}-","g");o.classList.remove("d-none"),o.innerHTML=o.innerHTML.replace(/__prefix__/g,`${t}`),console.log(form[0]),container.insertBefore(o,form[0]),totalForms.setAttribute("value",`${t+1}`),addRemoveButtonEvent(document.querySelectorAll(".remove-another-form"))}addButton&&addButton.addEventListener("click",addForm);var removeButtons=document.querySelectorAll(".remove-another-form");function removeForm(e){console.log("click"),e.preventDefault(),e.target.closest(".list-group-item").remove();var t=parseInt(document.querySelector("#id_form-TOTAL_FORMS").value);totalForms.setAttribute("value",""+(t-1)),t-1==0&&saveButton.classList.add("d-none")}addRemoveButtonEvent(removeButtons);var sidebarToggler=document.querySelector(".sidebar-toggler");sidebarToggler&&sidebarToggler.addEventListener("click",toggleSidebar);var sidebarTogglerHide=document.querySelector(".sidebar-toggler-hide");function toggleSidebar(){const e=document.querySelector(".sidebar");"none"===window.getComputedStyle(e).display?(e.style.display="flex",sidebarTogglerHide.style.display="block"):(e.style.display="",sidebarTogglerHide.style.display="")}sidebarTogglerHide&&sidebarTogglerHide.addEventListener("click",toggleSidebar);let expandAll=document.getElementById("expand-all");function setTotalBasketQuantity(e,t){var o=0;e.find("table tbody tr").each((function(){console.log($(this).data("basket-quantity")),o+=parseInt($(this).data("basket-quantity"))})),console.log("ttbasket:",o),1==o?(t.find(".single").removeClass("d-none").show(),t.find(".plural").hide(),t.find(".empty").hide(),t.find(".current-order").hide()):o>1&&(t.find(".plural").removeClass("d-none").show(),t.find(".single").hide(),t.find(".empty").hide(),t.find(".plural .qty").html(o),t.find(".current-order").hide()),0==o?($("header .shopping-basket .order-quantity").show().html(o),t.find(".summary").hide(),t.hasClass("has-order")?t.find(".current-order").show():t.find(".empty").removeClass("d-none").show(),e.find("form .form-check").removeClass("d-none").hide(),e.find('form button[type="submit"]').removeClass("d-none").hide(),e.find('form button[data-bs-dismiss="modal"]').show(),e.find(".modal-title span").removeClass("d-none").hide(),e.find('form input[type="reset"]').removeClass("d-none").hide()):(t.find(".summary").removeClass("d-none").show(),t.find(".empty").hide(),o>0?($("header .shopping-basket .order-quantity").removeClass("d-none"),$("header .shopping-basket .order-quantity").show().html(o)):$("header .shopping-basket .order-quantity").hide(),e.find("form .form-check").removeClass("d-none").show(),e.find('form button[type="submit"]').removeClass("d-none").show(),e.find('form button[data-bs-dismiss="modal"]').hide(),e.find(".modal-title span").removeClass("d-none").show(),e.find('form input[type="reset"]').removeClass("d-none").show(),e.find(".text-cancel").hide(),e.find(".text-change").show())}function updateProduct(e,t){console.log("qty",t),t=parseInt(t);var o=$("#basket"),n=$(".modal-checkout");o.find(".summary").removeClass("d-none"),o.find(".current-order").hide();var a=$("tr[data-product='"+e+"']"),s=a.data("ordered-quantity");a.data("basket-quantity",t),t=s+t,a.find("select.order-quantity").val(t),t>0?(a.removeClass("d-none"),a.show()):0==t&&a.hide();$("select.order-quantity").each((function(){parseInt($(this).val())})),setTotalBasketQuantity(n,o),o.removeClass("d-none")}expandAll&&(document.getElementById("expand-all").onclick=function(){console.log(this.getAttribute("aria-expanded")),this.setAttribute("aria-expanded","true"!==this.getAttribute("aria-expanded")),this.classList.toggle("show");var e=!1;this.classList.contains("show")&&(e=!0),document.querySelectorAll(".collapse").forEach((t=>{e?(t.classList.add("show"),document.querySelector('[data-bs-target="#'+t.id+'"]').setAttribute("aria-expanded",!0)):(t.classList.remove("show"),document.querySelector('[data-bs-target="#'+t.id+'"]').setAttribute("aria-expanded",!1))}))}),$("header .shopping-basket a").click((function(e){var t=document.querySelector(".modal-checkout");bootstrap.Modal.getOrCreateInstance(t).show()})),$(document).on("keyup","input.product-quantity",(function(){var e=$(this),t=parseInt(e.attr("min"))||1,o=parseInt(e.attr("max"))||100,n=parseInt(e.val())||t-1;n<t&&(n=t),n>o&&(n=o),e.val(n),updateProduct(e.data("product"),n)}));let plus_btns=document.querySelectorAll(".input-group .btn-plus"),minus_btns=document.querySelectorAll(".input-group .btn-minus"),qty_inputs=document.querySelectorAll(".input-group input[type=number]");plus_btns.forEach((e=>{console.log(e.disabled),e.previousElementSibling.disabled||e.addEventListener("click",(()=>{var t=e.previousElementSibling.value==e.previousElementSibling.max?e.previousElementSibling.max:parseInt(e.previousElementSibling.value)+1;e.previousElementSibling.value=t,updateProduct(e.getAttribute("data-product"),t)}))})),minus_btns.forEach((e=>{e.nextElementSibling.disabled||e.addEventListener("click",(()=>{var t=0==e.nextElementSibling.value?0:e.nextElementSibling.value-1;e.nextElementSibling.value=t,updateProduct(e.getAttribute("data-product"),t)}))})),$(".modal-checkout .btn-delete").click((function(){var e=$(this).parents("tr");e.fadeOut((function(){0===$(this).parents("tbody").children(":visible").length&&($(this).parents(".modal-checkout").find(".text-cancel").removeClass("d-none").show(),$(this).parents(".modal-checkout").find(".text-change").hide())})),e.find(".order-quantity").val(0).change()})),$('.modal-checkout form input[type="reset"]').click((function(){console.log("reset");var e=$(this).parents("form");e.find("tbody tr").show(),e.find(".form-check").removeClass("d-none").hide(),e.find('button[type="submit"]').removeClass("d-none").hide(),e.find('input[type="reset"]').removeClass("d-none").hide(),e.find('button[data-bs-dismiss="modal"]').show(),e.dirty("setAsClean");$("#basket");$("header .shopping-basket .order-quantity").hide()})),$((function(){$(".link-new-tab a").attr("target","_blank"),$(".link-new-tab a").attr("rel","nofollow noopener"),1==$(".modal-checkout").length?($(".modal-checkout").on("hide.bs.modal",(e=>{console.log("hide",$('.modal-checkout form input[type="reset"]')),$('.modal-checkout form input[type="reset"]').click()})),console.log("checkout exists"),$("header .shopping-basket").addClass("d-lg-block")):(console.log("checkout not"),$("header .shopping-basket").removeClass("d-lg-block"));$(".modal-checkout form").serialize();$(".modal-checkout form select").change((function(){var e=this.value,t=$(this).parents("tr").data("ordered-quantity");if(t){console.log("detect qty select change to set total basket qty"),$(this).parents("tr").data("basket-quantity",Math.max(e-t,0));var o=$("#basket");setTotalBasketQuantity($(this).parents(".modal-checkout"),o)}})),$(".modal-checkout form input, .modal-checkout form select").change((function(){console.log("detect form change");var e=$(this).parents("form");e.serialize();console.log(e,e.dirty("isClean"),e.dirty("isDirty"),e.dirty("showDirtyFields")),e.dirty("isClean")?(console.log("unchanged"),e.find(".form-check.terms-conditions").removeClass("d-none").hide(),e.find('button[type="submit"]').removeClass("d-none").hide(),e.find('input[type="reset"]').removeClass("d-none").hide(),e.find('button[data-bs-dismiss="modal"]').show(),$(this).parents(".modal-checkout").find(".modal-title span").removeClass("d-none").hide()):(console.log("changed"),e.find(".form-check.terms-conditions").removeClass("d-none").show(),e.find('input[type="reset"]').removeClass("d-none").show(),e.find('button[type="submit"]').removeClass("d-none").show(),e.find('button[data-bs-dismiss="modal"]').hide(),$(this).parents(".modal-checkout").find(".modal-title span").removeClass("d-none").show())}))}));var navbar=document.getElementById("navbar");navbar&&!navbar.classList.contains("nav-bg-dark")&&(window.onscroll=function(){document.body.scrollTop>=200||document.documentElement.scrollTop>=200?navbar.classList.add("nav-bg-dark"):navbar.classList.remove("nav-bg-dark")});const myCollapsible=document.getElementById("navbarSupportedContent"),header=document.querySelector("header");myCollapsible&&(myCollapsible.addEventListener("show.bs.collapse",(e=>{navbar.classList.add("nav-bg-dark"),header.classList.add("open"),document.body.classList.add("position-fixed-mobile")})),myCollapsible.addEventListener("hidden.bs.collapse",(e=>{header.classList.remove("open"),document.body.classList.remove("position-fixed-mobile"),document.body.scrollTop>=200||document.documentElement.scrollTop>=200||navbar.classList.remove("nav-bg-dark")}))),$((function(){$("#id_message").change((function(){this.closest("form").submit()}));if($("#basket").length){var e=$("#basket").offset().top;$(window).scroll((function(){$(window).scrollTop()>e-77?$("header .shopping-basket").removeClass("invisible"):$("header .shopping-basket").addClass("invisible")}))}}));