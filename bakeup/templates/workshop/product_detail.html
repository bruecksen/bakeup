{% extends "workshop/base.html" %}
{% load crispy_forms_tags %}
{% load i18n %}
{% load thumbnail %}
{% load django_bootstrap5 %}

{% block title %}{{ object.name }}{% endblock %}

{% block page_content %}
<div class="row mt-2 mb-2">
  <div class="col-7">
    <h1>{{ object.name }} {{ object.get_weight|floatformat:"-1" }} {{ object.weight_units }}</h1>
    <small>
    <ul class="list-unstyled list-inline mb-1">
      <li class="list-inline-item"><i class="fa-solid fa-tags fa-fw"></i> {{ object.category.name }}</li>
      <li class="list-inline-item">{% if object.is_sellable %}<i class="fa-solid fa-circle-check fa-fw"></i>{% else %}<i class="fa-solid fa-circle-xmark fa-fw"></i>{% endif %} {% trans "Sellable" %}</li>
      <li class="list-inline-item">{% if object.is_buyable %}<i class="fa-solid fa-circle-check fa-fw"></i>{% else %}<i class="fa-solid fa-circle-xmark fa-fw"></i>{% endif %} {% trans "Buyable" %}</li>
      <li class="list-inline-item">{% if object.is_composable %}<i class="fa-solid fa-circle-check fa-fw"></i>{% else %}<i class="fa-solid fa-circle-xmark fa-fw"></i>{% endif %} {% trans "Composable" %}</li>
    </ul>
    <ul class="list-unstyled list-inline mb-1">
      {% for parent in object.childs.all %}
      <li class="list-inline-item"><i class="fa-solid fa-arrow-up-wide-short"></i> <a href="{% url 'workshop:product-detail' pk=parent.parent.pk %}">{{ parent.parent }} </a></li>
      {% endfor %}
    </ul>
    {% if object.description %}
    <p>{{ object.description|safe }}</p>
    {% endif %}
    </small>
  </div>
  <div class="col-5 mt-2">
    <div class="btn-group btn-group-sm float-end" role="group" aria-label="Basic example">
      <a href="{% url 'workshop:product-update' pk=object.pk %}" class="btn btn-primary"><i class="fas fa-edit"></i> Edit product</a>
      <a href="{% url 'workshop:product-add' pk=object.pk %}" class="btn btn-primary"><i class="fas fa-circle-plus"></i> Add product</a>
      <a href="{% url 'workshop:product-delete' pk=object.pk %}" class="btn btn-primary"><i class="fas fa-trash-can"></i> Delete product</a>
    </div>
    {% if object.image %}
      {% thumbnail object.image "150" crop="center" as im %}
      <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" class="img-thumbnail float-end mt-2" alt="product image">
      {% endthumbnail %}
    {% endif %}
  </div>
</div>
<div class="row mb-4 justify-content-between">
  {% if key_figures_form %}
  <div class="col-4">
    <div class="card p-3">
      <h5>Kennzahlen</h5>
      {% bootstrap_field key_figures_form.fermentation_loss size='sm' addon_after='%' wrapper_class='' layout='horizontal' horizontal_label_class='col-md-7' horizontal_field_class='col-md-4' %}
      {% bootstrap_field key_figures_form.dough_yield size='sm' addon_before='TA' wrapper_class='' layout='horizontal' horizontal_label_class='col-md-7' horizontal_field_class='col-md-4' %}
      {% bootstrap_field key_figures_form.salt size='sm' addon_after='%' wrapper_class='' layout='horizontal' horizontal_label_class='col-md-7' horizontal_field_class='col-md-4' %}
    </div>
  </div>
  {% endif %}
</div>
<div class="row">
  <div class="col">
    {% include "workshop/includes/product_children.html" with children=object.parents.all parent=object is_root=True quantity=1 %}
  </div>
</div>
{% endblock %}


